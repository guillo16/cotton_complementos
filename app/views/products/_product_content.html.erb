<div class="product-show-container d-lg-flex">
  <div class="product-image">
    <% @product.photos.each do |photo| %>
    <%= cl_image_tag photo.key %>
    <% end %>
  </div>
  <div class="product-show-content p-lg-3 ">
    <p><%= @product.category.division.title %> / <%= @product.category.title %></p>
    <h2><%= @product.title.upcase %></h2>
    <h3><%= humanized_money_with_symbol(@product.price) %></h3>
    <div class="product-show-variants">
      <!-- form para comprar muy complejo   -->
      <div>
        <%= form_tag line_items_path do %>
        <%= hidden_field_tag 'product_id', @product.id %>
        <div class="label-size d-flex">
          <% @product.variants.each do |variant| %>
          <% if variant.title == 'unico' %>
          <%= hidden_field_tag 'variant_id', variant.id %>
          <% else %>
          <% unless variant.stock == 0 %>
          <label>
            <input type="radio" name="variant_id" value="<%= variant.id %>" checked /><%= variant.title %>
          </label>
          <% end %>
          <% end %>
          <% end %>
        </div>
        <!-- cantidad the stock que hay -->
        <% stock = @product.variants.sum(:stock) %>
        <% if stock >= 1 %>
        <%= submit_tag 'COMPRAR', class: 'btn btn-dark btn-lg btn-block' %>
        <% else %>
        <button class= 'btn btn-secondary btn-lg btn-block 'disabled>AGOTADO</button>
        <% end %>
        <% end %>
      </div>
    </div>
    <div class="product-show-details">
      <button id="myCatButton" onClick="myCatFunction(); toggleCatText(this.id);">Detalles del producto +</button>
      <div style="display:none;" id="myCatDiv">
        <p><%= @product.description %></p>
      </div>
    </div>
    <div class="product-show-details-2">
      <button id="myComprarButton" onClick="myComprarFunction(); toggleComprarText(this.id);"><p>Como comprar</p>  +</button>
      <div style="display:none;" id="myComprarDiv">
       <p>Una vez que compres el producto , nos comunicaremos con vos para pactar la entrega</p>
       <p>El pago se puede hacer mediante <strong>transferencia bancaria</strong>  o en <strong>efectivo</strong>  durante la entrega del producto</p>
       <p><strong>Por el momento el pago con tarjetas no esta disponble</strong></p>
     </div>
   </div>
 </div>
</div>
<script>
  function myCatFunction() {
    var x = document.getElementById("myCatDiv");
    if (x.style.display === "none") {
      x.style.display = "block";
    } else {
      x.style.display = "none";
    }

  }
  function toggleCatText(button_id)  {
   if (document.getElementById(button_id).innerText == "Detalles del producto +")
   {
     document.getElementById(button_id).innerText = "Detalles del producto -";
   }
   else
   {
     document.getElementById(button_id).innerText = "Detalles del producto +";
   }
 }

 function myComprarFunction() {
  var x = document.getElementById("myComprarDiv");
  if (x.style.display === "none") {
    x.style.display = "block";
  } else {
    x.style.display = "none";
  }

}
function toggleComprarText(button_id)  {
 if (document.getElementById(button_id).innerText == "Como comprar +")
 {
   document.getElementById(button_id).innerText = "Como comprar -";
 }
 else
 {
   document.getElementById(button_id).innerText = "Como comprar +";
 }
}
</script>

<p>
  <button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#collapseExample" aria-expanded="false" aria-controls="collapseExample">
 Show
  </button>
</p>
<div class="collapse" id="collapseExample">
  <div class="card card-body">
    Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident.
  </div>
</div>

<script>
  $(document).ready(function() {


$('[data-toggle="collapse"]').click(function() {
  $(this).toggleClass( "active" );
  if ($(this).hasClass("active")) {
    $(this).text("Hide");
  } else {
    $(this).text("Show");
  }
});
</script>


<p>
  <a class="btn btn-primary" data-toggle="collapse" href="#collapseExample" role="button" aria-expanded="false" aria-controls="collapseExample">
    Link with href
  </a>
  <button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#collapseExample" aria-expanded="false" aria-controls="collapseExample">
    Button with data-target
  </button>
</p>
<div class="collapse" id="collapseExample">
  <div class="card card-body">
    Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident.
  </div>
</div>
